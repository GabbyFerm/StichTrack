<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="StitchTrack.MAUI.Controls.OnboardingPopup"
               Color="Transparent"
               CanBeDismissedByTappingOutsideOfPopup="False"
               Size="320,450">

  <!-- Semi-transparent background -->
  <Frame BackgroundColor="{AppThemeBinding Light=#FDFBF5, Dark=#424B54}"
         CornerRadius="20"
         Padding="30,40"
         HasShadow="True"
         BorderColor="Transparent">

    <VerticalStackLayout Spacing="20" HorizontalOptions="Center">

      <!-- Yarn Ball Icon -->
      <Image Source="ball_of_wool.svg"
             HeightRequest="80"
             WidthRequest="80"
             HorizontalOptions="Center">
        <Image.Behaviors>
          <toolkit:IconTintColorBehavior TintColor="{StaticResource BrandGold}" />
        </Image.Behaviors>
      </Image>

      <!-- Welcome Title -->
      <Label Text="Welcome to"
             FontFamily="MontserratMedium"
             FontSize="16"
             TextColor="{StaticResource TextSecondary}"
             HorizontalOptions="Center" />

      <!-- App Logo Text -->
      <Label Text="Stitch Track"
             FontFamily="Pacifico"
             FontSize="32"
             TextColor="{StaticResource BrandGold}"
             HorizontalOptions="Center"
             Margin="0,-10,0,0" />

      <!-- Description -->
      <Label FontFamily="MontserratRegular"
             FontSize="14"
             TextColor="{StaticResource TextPrimary}"
             HorizontalTextAlignment="Center"
             LineBreakMode="WordWrap"
             Margin="0,10,0,0">
        <Label.FormattedText>
          <FormattedString>
            <Span Text="Start counting rows effortlessly" FontAttributes="Bold" />
            <Span Text="&#10;&#10;Your projects will save locally and" />
            <Span Text="&#10;you always have access to them." />
          </FormattedString>
        </Label.FormattedText>
      </Label>

      <!-- Features List -->
      <VerticalStackLayout Spacing="10" Margin="0,10,0,20">

        <HorizontalStackLayout Spacing="10">
          <Label Text="✓"
                 FontSize="18"
                 TextColor="{StaticResource BrandGold}"
                 VerticalOptions="Center" />
          <Label Text="Track multiple projects"
                 FontFamily="MontserratMedium"
                 FontSize="12"
                 TextColor="{StaticResource TextPrimary}"
                 VerticalOptions="Center" />
        </HorizontalStackLayout>

        <HorizontalStackLayout Spacing="10">
          <Label Text="✓"
                 FontSize="18"
                 TextColor="{StaticResource BrandGold}"
                 VerticalOptions="Center" />
          <Label Text="Count rows with ease"
                 FontFamily="MontserratMedium"
                 FontSize="12"
                 TextColor="{StaticResource TextPrimary}"
                 VerticalOptions="Center" />
        </HorizontalStackLayout>

        <HorizontalStackLayout Spacing="10">
          <Label Text="✓"
                 FontSize="18"
                 TextColor="{StaticResource BrandGold}"
                 VerticalOptions="Center" />
          <Label Text="Never lose your progress"
                 FontFamily="MontserratMedium"
                 FontSize="12"
                 TextColor="{StaticResource TextPrimary}"
                 VerticalOptions="Center" />
        </HorizontalStackLayout>

      </VerticalStackLayout>

      <!-- Get Started Button -->
      <Button Text="GET STARTED"
              Style="{StaticResource PrimaryButton}"
              Clicked="OnGetStartedClicked"
              HorizontalOptions="FillAndExpand"
              Margin="0,10,0,0" />

      <!-- Show Tutorial Link (Hidden, for Settings page re-access) -->
      <Label x:Name="ShowTutorialLabel"
             Text="Learn more"
             FontFamily="MontserratMedium"
             FontSize="11"
             TextColor="{StaticResource LinkColor}"
             HorizontalOptions="Center"
             IsVisible="False"
             Margin="0,5,0,0">
        <Label.GestureRecognizers>
          <TapGestureRecognizer Tapped="OnLearnMoreTapped" />
        </Label.GestureRecognizers>
      </Label>

    </VerticalStackLayout>

  </Frame>

</toolkit:Popup>
