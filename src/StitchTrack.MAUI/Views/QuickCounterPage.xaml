<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:StitchTrack.Application.ViewModels;assembly=StitchTrack.Application"
             x:Class="StitchTrack.MAUI.Views.QuickCounterPage"
             BackgroundColor="#E8E8E8"
             Shell.NavBarIsVisible="False">

  <!-- Bind to QuickCounterViewModel -->
  <ContentPage.BindingContext>
    <viewmodels:QuickCounterViewModel />
  </ContentPage.BindingContext>

  <Grid RowDefinitions="Auto,*,Auto">

    <!-- Header with Logo -->
    <VerticalStackLayout Grid.Row="0" 
                         Padding="20,30,20,20"
                         Spacing="5">
      <Image Source="logo.svg"
             HeightRequest="80"
             HorizontalOptions="Center" />
      <Label Text="NEVER MISS A ROW"
             FontSize="12"
             FontFamily="MontserratMedium"
             TextColor="#000"
             HorizontalOptions="Center"
             CharacterSpacing="8" />
    </VerticalStackLayout>

    <!-- Counter Card with ScrollView -->
    <ScrollView Grid.Row="1">
      <Frame Margin="20,10,20,10"
             Padding="20"
             CornerRadius="15"
             BackgroundColor="White"
             HasShadow="True">

        <VerticalStackLayout Spacing="10">

          <!-- Title -->
          <Label Text="Quick Row Counter"
                 FontSize="20"
                 FontAttributes="Bold"
                 TextColor="#000"
                 HorizontalOptions="Center" />

          <Label Text="Start counting immediately - save to project anytime!"
                 FontSize="12"
                 TextColor="#666"
                 HorizontalOptions="Center"
                 Margin="0,0,0,10" />

          <!-- Current Row Display with grey background -->
          <Frame BackgroundColor="#F1F1F1"
                 CornerRadius="10"
                 Padding="10,5"
                 HasShadow="False"
                 BorderColor="Transparent">
            <VerticalStackLayout Spacing="0">
              <Label Text="Current Row"
                     FontSize="14"
                     TextColor="#000"
                     HorizontalOptions="Center"
                     Margin="0,10,0,0" />

              <!-- The actual counter number -->
              <Label Text="{Binding CurrentCount}"
                     FontSize="90"
                     FontFamily="MontserratExtraBold"
                     TextColor="#424B54"
                     HorizontalOptions="Center"
                     LineHeight="0.8"
                     Margin="0,-5,0,-5" />
            </VerticalStackLayout>
          </Frame>

          <!-- Buttons -->
          <Grid ColumnDefinitions="*,*" 
                ColumnSpacing="15"
                Margin="0,15,0,0">

            <!-- Decrement Button -->
            <Button Grid.Column="0"
                    Text="- DECREASE"
                    Command="{Binding DecrementCommand}"
                    BackgroundColor="#424B54"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="50"
                    CornerRadius="10" />

            <!-- Increment Button -->
            <Button Grid.Column="1"
                    Text="+ INCREASE"
                    Command="{Binding IncrementCommand}"
                    BackgroundColor="#E1AD37"
                    TextColor="White"
                    FontAttributes="Bold"
                    HeightRequest="50"
                    CornerRadius="10" />
          </Grid>

          <!-- Reset Button -->
          <Button Text="â†» Reset Counter"
                  Command="{Binding ResetCommand}"
                  BackgroundColor="Transparent"
                  TextColor="#424B54"
                  FontAttributes="Bold"
                  FontSize="14"
                  Margin="0,10,0,0" />

          <!-- Tip Text -->
          <Label Text="ðŸ’¡ Tip: Tap 'Save to Project' below to keep this counter"
                 FontSize="12"
                 TextColor="#424B54"
                 HorizontalOptions="Center"
                 Margin="0,10,0,0" />

          <!-- Save to Project Button (Phase 1 - TASK-012) -->
          <Button Text="ðŸ’¾ Save to Project"
                  BackgroundColor="Transparent"
                  TextColor="#FE64A3"
                  BorderColor="#FE64A3"
                  BorderWidth="2"
                  FontAttributes="Bold"
                  FontSize="16"
                  CornerRadius="10"
                  Margin="0,10,0,0"
                  IsEnabled="False"
                  Opacity="0.5" />

          <Label Text="(Coming soon - TASK-012)"
                 FontSize="10"
                 TextColor="#999"
                 HorizontalOptions="Center"
                 Margin="0,5,0,0" />

        </VerticalStackLayout>
      </Frame>
    </ScrollView>

    <!-- Bottom Navigation Note -->
    <Label Grid.Row="2"
           Text="Use the tabs below to access Projects, Sessions, Export, and Settings"
           FontSize="10"
           TextColor="#999"
           HorizontalOptions="Center"
           Margin="0,0,0,10" />

  </Grid>

</ContentPage>
